env:
  global:
  - CC_TEST_REPORTER_ID=8efeb1a8373dafb8697aac6eea657464f119181de12b081941cbef146aaba209
  - COMPANIES_HOUSE_API_KEY=secretkey
language: ruby
rvm: 2.4.2
cache: bundler
git:
  depth: 3
before_install:
- export TZ=UTC
- gem install -v 1.17.2 bundler --no-rdoc --no-ri
before_script:
- if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64
  > ./cc-test-reporter; fi
- if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then chmod +x ./cc-test-reporter; fi
- if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then ./cc-test-reporter before-build;
  fi
- bundle exec rubocop
after_script:
- if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then ./cc-test-reporter after-build --exit-code
  $TRAVIS_TEST_RESULT; fi
deploy:
  provider: rubygems
  gem: defra_ruby_validators
  on:
    tags: true
    repo: DEFRA/defra-ruby-validators
  api_key:
    secure: iOxiZ6K2xOPkOiK1fpLSIp+fWPa6EBplDCL6K2LSpsFY0RSn6gX5njoNSgb7WhcoZzGys/sNht/9B6klQFRS3Gmeu5BjMktpusYCNSfk8ING4gcadRFgB2b7nMyhYNkAsK3vLXnD4foXmvY+q7uJl7eCf8ivz+wthF/0tTIF0YQNFQHig4X71Gxp0G9uYELwnkpJHBL3fHl+28SVetFp60n+or92P0zGuQNQ04w3fPdEWJTisG8DE8FLtaotgNQ6JHGRMNZKAReevrZaZXUXltiwp4dPKwVFZwknEasvrAusnAvUbe18QOguCbp/jD0RWgHX/cTajKmBEFkaV8ZoZ3OkJZwZ9R8+OEKV4MPY/PVnPkRen8nzL4D489ignncBlMmBpVhIibWUPzzapTO4ld/IGN6MdUUczPUuSm+baKVTKDVAnA6dX509eii/BEaHXweEQb2xipHU5edNq8DZFESKs0zJTXUo5l6B6xOyF8C2DfZaz0qes1ZyoXP3XTBR7n278g9csgcL6FWVFpknIZX3w+dWGCD0IHEjRR6XPlnUzexYUqK7WIxQIhBvTSITDS7Ig7pOiiOlWoP0CP6299m0Zgt5/bl4IMcjhidgtNFAYOR408rwatg8M3IC0W9z+FuTi3cTapGsSFq3BEv9Ve1b8Qw7W5w7sMzrilVJxaM=
